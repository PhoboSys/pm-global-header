{"version":3,"file":"index.js","names":["_dateFns","require","_locale","_config","_interopRequireDefault","e","__esModule","ownKeys","r","t","Object","keys","getOwnPropertySymbols","o","filter","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","arguments","length","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","_toPropertyKey","value","configurable","writable","i","_toPrimitive","_typeof","Symbol","toPrimitive","call","TypeError","String","Number","_slicedToArray","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","a","_arrayLikeToArray","toString","slice","constructor","name","Array","from","test","n","l","iterator","u","f","next","done","isArray","INVALID_DATE","exports","Date","NaN","LOCALES","enUS","es","locale","config","default_locale","setLocaleDateFns","newlocale","code","toUnixTS","timestamp","parseInt","nowUnixTS","now","timeSinceUnixTS","datefrom","dateto","undefined","options","addSuffix","formatDistanceUnixTS","distance","formatDistance","_distance","_distance$split","split","_distance$split2","units","join","toDate","isEqual","formatDistanceStrict","date","datetime","isNaN","getTime","first","second","firstType","secondType","equal","fKeys","sKeys"],"sources":["../../../src/lib/date-utils/index.js"],"sourcesContent":["import { format, formatDistanceStrict, intervalToDuration, differenceInSeconds } from 'date-fns'\nimport { es, enUS } from 'date-fns/locale'\n\nimport config from '@config'\n\nexport const INVALID_DATE = new Date(NaN)\n\nconst LOCALES = {\n  'en': enUS,\n  'en-US': enUS,\n  'es': es\n}\n\nlet locale = LOCALES[config.default_locale]\n\nexport function setLocaleDateFns(newlocale) {\n  if (newlocale !== locale.code && newlocale in LOCALES) {\n    locale = LOCALES[newlocale]\n  }\n}\n\nexport function toUnixTS(timestamp) {\n  return parseInt(timestamp / 1000)\n}\n\nexport function nowUnixTS() {\n  return toUnixTS(Date.now())\n}\n\nexport function timeSinceUnixTS(\n  datefrom,\n  dateto = nowUnixTS(),\n  options = { addSuffix: true }\n) {\n    return formatDistanceUnixTS(datefrom, dateto, options)\n}\n\nexport function formatDistanceUnixTS(\n  datefrom,\n  dateto = nowUnixTS(),\n  options = {}\n) {\n\n  datefrom = datefrom * 1000\n  dateto = dateto * 1000\n  let distance = formatDistance(datefrom, dateto, options)\n\n  if (options?.short) {\n    const [value, units] = distance?.split(' ')\n    distance = [value, units?.[0]].join(' ')\n  }\n\n  return distance\n}\n\nexport function formatDistance(\n  datefrom,\n  dateto = Date.now(),\n  options = {}\n) {\n\n  datefrom = toDate(datefrom)\n  dateto = toDate(dateto)\n\n  if (\n    isEqual(datefrom, INVALID_DATE) ||\n    isEqual(dateto, INVALID_DATE)\n  ) {\n    return ''\n  }\n\n  return formatDistanceStrict(datefrom, dateto, { ...options, locale })\n\n}\n\nexport function toDate(date) {\n  // parameters validaton\n  if (\n    !date instanceof Date &&\n    !(typeof date === 'string') &&\n    !(typeof date === 'number')\n  ) return INVALID_DATE\n\n  const datetime = new Date(date)\n  // validate datetime\n  if (isNaN(datetime.getTime())) return INVALID_DATE\n\n  return datetime\n}\n\nconst isEqual = (first, second) => {\n  if (first === second) {\n    return true\n  }\n  if ((first === undefined || second === undefined || first === null || second === null)\n    && (first || second)) {\n    return false\n  }\n  const firstType = first?.constructor.name\n  const secondType = second?.constructor.name\n  if (firstType !== secondType) {\n    return false\n  }\n  if (firstType === 'Array') {\n    if (first.length !== second.length) {\n      return false\n    }\n    let equal = true\n    for (const i in first) {\n      if (!isEqual(first[i], second[i])) {\n        equal = false\n        break\n      }\n    }\n    return equal\n  }\n  if (firstType === 'Object') {\n    let equal = true\n    const fKeys = Object.keys(first)\n    const sKeys = Object.keys(second)\n    if (fKeys.length !== sKeys.length) {\n      return false\n    }\n    for (const i in fKeys) {\n      if (first[fKeys[i]] && second[fKeys[i]]) {\n        if (first[fKeys[i]] === second[fKeys[i]]) {\n          continue // eslint-disable-line\n        }\n        if (first[fKeys[i]] && (first[fKeys[i]].constructor.name === 'Array'\n          || first[fKeys[i]].constructor.name === 'Object')) {\n          equal = isEqual(first[fKeys[i]], second[fKeys[i]])\n          if (!equal) {\n            break\n          }\n        } else if (first[fKeys[i]] !== second[fKeys[i]]) {\n          equal = false\n          break\n        }\n      } else if ((first[fKeys[i]] && !second[fKeys[i]]) || (!first[fKeys[i]] && second[fKeys[i]])) {\n        equal = false\n        break\n      }\n    }\n    return equal\n  }\n\n  return first === second\n}\n"],"mappings":"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","ignoreList":[]}