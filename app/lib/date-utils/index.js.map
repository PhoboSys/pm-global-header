{"version":3,"file":"index.js","names":["_dateFns","require","_locale","_config","_interopRequireDefault","obj","__esModule","ownKeys","e","r","t","Object","keys","getOwnPropertySymbols","o","filter","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","arguments","length","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","key","value","_toPropertyKey","configurable","writable","arg","_toPrimitive","_typeof","String","input","hint","prim","Symbol","toPrimitive","undefined","res","call","TypeError","Number","_slicedToArray","arr","i","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","minLen","_arrayLikeToArray","n","prototype","toString","slice","constructor","name","Array","from","test","len","arr2","l","iterator","u","a","f","next","done","isArray","INVALID_DATE","Date","NaN","exports","LOCALES","enUS","es","locale","config","default_locale","setLocaleDateFns","newlocale","code","toUnixTS","timestamp","parseInt","nowUnixTS","now","timeSinceUnixTS","datefrom","dateto","options","addSuffix","formatDistanceUnixTS","distance","formatDistance","_distance","_distance$split","split","_distance$split2","units","join","toDate","isEqual","formatDistanceStrict","date","datetime","isNaN","getTime","first","second","firstType","secondType","equal","fKeys","sKeys"],"sources":["../../../src/lib/date-utils/index.js"],"sourcesContent":["import { format, formatDistanceStrict, intervalToDuration, differenceInSeconds } from 'date-fns'\nimport { es, enUS } from 'date-fns/locale'\n\nimport config from '@config'\n\nexport const INVALID_DATE = new Date(NaN)\n\nconst LOCALES = {\n  'en': enUS,\n  'en-US': enUS,\n  'es': es\n}\n\nlet locale = LOCALES[config.default_locale]\n\nexport function setLocaleDateFns(newlocale) {\n  if (newlocale !== locale.code && newlocale in LOCALES) {\n    locale = LOCALES[newlocale]\n  }\n}\n\nexport function toUnixTS(timestamp) {\n  return parseInt(timestamp / 1000)\n}\n\nexport function nowUnixTS() {\n  return toUnixTS(Date.now())\n}\n\nexport function timeSinceUnixTS(\n  datefrom,\n  dateto = nowUnixTS(),\n  options = { addSuffix: true }\n) {\n    return formatDistanceUnixTS(datefrom, dateto, options)\n}\n\nexport function formatDistanceUnixTS(\n  datefrom,\n  dateto = nowUnixTS(),\n  options = {}\n) {\n\n  datefrom = datefrom * 1000\n  dateto = dateto * 1000\n  let distance = formatDistance(datefrom, dateto, options)\n\n  if (options?.short) {\n    const [value, units] = distance?.split(' ')\n    distance = [value, units?.[0]].join(' ')\n  }\n\n  return distance\n}\n\nexport function formatDistance(\n  datefrom,\n  dateto = Date.now(),\n  options = {}\n) {\n\n  datefrom = toDate(datefrom)\n  dateto = toDate(dateto)\n\n  if (\n    isEqual(datefrom, INVALID_DATE) ||\n    isEqual(dateto, INVALID_DATE)\n  ) {\n    return ''\n  }\n\n  return formatDistanceStrict(datefrom, dateto, { ...options, locale })\n\n}\n\nexport function toDate(date) {\n  // parameters validaton\n  if (\n    !date instanceof Date &&\n    !(typeof date === 'string') &&\n    !(typeof date === 'number')\n  ) return INVALID_DATE\n\n  const datetime = new Date(date)\n  // validate datetime\n  if (isNaN(datetime.getTime())) return INVALID_DATE\n\n  return datetime\n}\n\nconst isEqual = (first, second) => {\n  if (first === second) {\n    return true\n  }\n  if ((first === undefined || second === undefined || first === null || second === null)\n    && (first || second)) {\n    return false\n  }\n  const firstType = first?.constructor.name\n  const secondType = second?.constructor.name\n  if (firstType !== secondType) {\n    return false\n  }\n  if (firstType === 'Array') {\n    if (first.length !== second.length) {\n      return false\n    }\n    let equal = true\n    for (const i in first) {\n      if (!isEqual(first[i], second[i])) {\n        equal = false\n        break\n      }\n    }\n    return equal\n  }\n  if (firstType === 'Object') {\n    let equal = true\n    const fKeys = Object.keys(first)\n    const sKeys = Object.keys(second)\n    if (fKeys.length !== sKeys.length) {\n      return false\n    }\n    for (const i in fKeys) {\n      if (first[fKeys[i]] && second[fKeys[i]]) {\n        if (first[fKeys[i]] === second[fKeys[i]]) {\n          continue // eslint-disable-line\n        }\n        if (first[fKeys[i]] && (first[fKeys[i]].constructor.name === 'Array'\n          || first[fKeys[i]].constructor.name === 'Object')) {\n          equal = isEqual(first[fKeys[i]], second[fKeys[i]])\n          if (!equal) {\n            break\n          }\n        } else if (first[fKeys[i]] !== second[fKeys[i]]) {\n          equal = false\n          break\n        }\n      } else if ((first[fKeys[i]] && !second[fKeys[i]]) || (!first[fKeys[i]] && second[fKeys[i]])) {\n        equal = false\n        break\n      }\n    }\n    return equal\n  }\n\n  return first === second\n}\n"],"mappings":"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"}