{"version":3,"file":"index.js","names":["_dateFns","require","_locale","_config","_interopRequireDefault","obj","__esModule","ownKeys","e","r","t","Object","keys","getOwnPropertySymbols","o","filter","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","arguments","length","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","key","value","_toPropertyKey","configurable","writable","i","_toPrimitive","_typeof","String","Symbol","toPrimitive","call","TypeError","Number","_slicedToArray","arr","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","minLen","_arrayLikeToArray","n","prototype","toString","slice","constructor","name","Array","from","test","len","arr2","l","iterator","u","a","f","next","done","isArray","INVALID_DATE","exports","Date","NaN","LOCALES","enUS","es","locale","config","default_locale","setLocaleDateFns","newlocale","code","toUnixTS","timestamp","parseInt","nowUnixTS","now","timeSinceUnixTS","datefrom","dateto","undefined","options","addSuffix","formatDistanceUnixTS","distance","formatDistance","_distance","_distance$split","split","_distance$split2","units","join","toDate","isEqual","formatDistanceStrict","date","datetime","isNaN","getTime","first","second","firstType","secondType","equal","fKeys","sKeys"],"sources":["../../../src/lib/date-utils/index.js"],"sourcesContent":["import { format, formatDistanceStrict, intervalToDuration, differenceInSeconds } from 'date-fns'\nimport { es, enUS } from 'date-fns/locale'\n\nimport config from '@config'\n\nexport const INVALID_DATE = new Date(NaN)\n\nconst LOCALES = {\n  'en': enUS,\n  'en-US': enUS,\n  'es': es\n}\n\nlet locale = LOCALES[config.default_locale]\n\nexport function setLocaleDateFns(newlocale) {\n  if (newlocale !== locale.code && newlocale in LOCALES) {\n    locale = LOCALES[newlocale]\n  }\n}\n\nexport function toUnixTS(timestamp) {\n  return parseInt(timestamp / 1000)\n}\n\nexport function nowUnixTS() {\n  return toUnixTS(Date.now())\n}\n\nexport function timeSinceUnixTS(\n  datefrom,\n  dateto = nowUnixTS(),\n  options = { addSuffix: true }\n) {\n    return formatDistanceUnixTS(datefrom, dateto, options)\n}\n\nexport function formatDistanceUnixTS(\n  datefrom,\n  dateto = nowUnixTS(),\n  options = {}\n) {\n\n  datefrom = datefrom * 1000\n  dateto = dateto * 1000\n  let distance = formatDistance(datefrom, dateto, options)\n\n  if (options?.short) {\n    const [value, units] = distance?.split(' ')\n    distance = [value, units?.[0]].join(' ')\n  }\n\n  return distance\n}\n\nexport function formatDistance(\n  datefrom,\n  dateto = Date.now(),\n  options = {}\n) {\n\n  datefrom = toDate(datefrom)\n  dateto = toDate(dateto)\n\n  if (\n    isEqual(datefrom, INVALID_DATE) ||\n    isEqual(dateto, INVALID_DATE)\n  ) {\n    return ''\n  }\n\n  return formatDistanceStrict(datefrom, dateto, { ...options, locale })\n\n}\n\nexport function toDate(date) {\n  // parameters validaton\n  if (\n    !date instanceof Date &&\n    !(typeof date === 'string') &&\n    !(typeof date === 'number')\n  ) return INVALID_DATE\n\n  const datetime = new Date(date)\n  // validate datetime\n  if (isNaN(datetime.getTime())) return INVALID_DATE\n\n  return datetime\n}\n\nconst isEqual = (first, second) => {\n  if (first === second) {\n    return true\n  }\n  if ((first === undefined || second === undefined || first === null || second === null)\n    && (first || second)) {\n    return false\n  }\n  const firstType = first?.constructor.name\n  const secondType = second?.constructor.name\n  if (firstType !== secondType) {\n    return false\n  }\n  if (firstType === 'Array') {\n    if (first.length !== second.length) {\n      return false\n    }\n    let equal = true\n    for (const i in first) {\n      if (!isEqual(first[i], second[i])) {\n        equal = false\n        break\n      }\n    }\n    return equal\n  }\n  if (firstType === 'Object') {\n    let equal = true\n    const fKeys = Object.keys(first)\n    const sKeys = Object.keys(second)\n    if (fKeys.length !== sKeys.length) {\n      return false\n    }\n    for (const i in fKeys) {\n      if (first[fKeys[i]] && second[fKeys[i]]) {\n        if (first[fKeys[i]] === second[fKeys[i]]) {\n          continue // eslint-disable-line\n        }\n        if (first[fKeys[i]] && (first[fKeys[i]].constructor.name === 'Array'\n          || first[fKeys[i]].constructor.name === 'Object')) {\n          equal = isEqual(first[fKeys[i]], second[fKeys[i]])\n          if (!equal) {\n            break\n          }\n        } else if (first[fKeys[i]] !== second[fKeys[i]]) {\n          equal = false\n          break\n        }\n      } else if ((first[fKeys[i]] && !second[fKeys[i]]) || (!first[fKeys[i]] && second[fKeys[i]])) {\n        equal = false\n        break\n      }\n    }\n    return equal\n  }\n\n  return first === second\n}\n"],"mappings":"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"}