{"version":3,"file":"Nickname.js","names":["_react","_interopRequireWildcard","require","_propTypes","_interopRequireDefault","_lodash","_clsx","_Edit","_UserHint","_CloseIcon","_useTransition3","_NicknameModule","e","__esModule","_getRequireWildcardCache","WeakMap","r","t","_typeof","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","_defineProperty","_toPropertyKey","value","enumerable","configurable","writable","_toPrimitive","Symbol","toPrimitive","TypeError","String","Number","_slicedToArray","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","_arrayLikeToArray","toString","slice","constructor","name","Array","from","test","length","l","iterator","f","o","next","done","push","isArray","localStorageSelector","Nickname","_ref","address","username","editable","collapsed","onNicknameChanged","_useState","useState","_useState2","inputValue","setInputValue","_useState3","_useState4","editingNickname","setEditNickname","_useState5","localStorage","getItem","_useState6","showHint","setShowHint","timeout","_useTransition","useTransition","_useTransition2","mountHint","showingHint","isEdit","handleNicknameSave","useCallback","closeHint","nickname","trim","substring","changingNickname","target","setItem","startEditNickname","stopPropagation","createElement","className","cn","css","container","editing","Fragment","autoFocus","input","onChange","maxLength","id","hasValue","htmlFor","save","onClick","text","title","edit","editicon","hint","close","icon","content","description","propTypes","PropTypes","string","bool","func","_default","exports"],"sources":["../../../../../src/mobile/components/StatisticsBar/Nickname/Nickname.js"],"sourcesContent":["import React, { useState, useCallback, useEffect } from 'react'\nimport PropTypes from 'prop-types'\nimport { trim } from 'lodash'\nimport cn from 'clsx'\n\nimport Edit from '../../SVG/Edit'\nimport UserHint from '../../SVG/UserHint'\nimport CloseIcon from '../../SVG/CloseIcon'\n\nimport { useTransition } from '../../../../hooks/useTransition'\n\nimport css from './Nickname.module.scss';\n\nconst localStorageSelector = 'pm-react-components-username-hint-closed'\n\nconst Nickname = ({\n  address,\n  username,\n  editable,\n  collapsed,\n  onNicknameChanged,\n}) => {\n  const [inputValue, setInputValue] = useState(username)\n  const [editingNickname, setEditNickname] = useState(false)\n  const [showHint, setShowHint] = useState(!username && localStorage.getItem(localStorageSelector) !== 'true')\n\n  const timeout = 100 //ms\n  const [mountHint, showingHint] = useTransition(showHint, timeout)\n\n  const isEdit = editable && (editingNickname || !username)\n\n  const handleNicknameSave = useCallback(() => {\n    if (!inputValue) return\n    if (!onNicknameChanged) return\n\n    closeHint()\n    setEditNickname(false)\n    onNicknameChanged({ address, nickname: trim(inputValue).substring(0, 35) })\n\n  }, [onNicknameChanged, inputValue, address])\n\n  const changingNickname = useCallback((e) => { setInputValue(e.target.value) }, [setInputValue])\n\n  const closeHint = useCallback(() => {\n    localStorage.setItem(localStorageSelector, true)\n    setShowHint(false)\n  }, [])\n\n  const startEditNickname = useCallback((e) => {\n    e.stopPropagation()\n    setEditNickname(true)\n  }, [])\n\n  return (\n    <div className={cn(css.container, { [css.collapsed]: collapsed })}>\n      <div className={cn(css.nickname, {[css.editing]: isEdit })}>\n\n        {isEdit && (\n          <>\n            <input\n              autoFocus={false}\n              className={css.input}\n              value={inputValue}\n              onChange={changingNickname}\n              maxLength=\"35\"\n              id=\"nickname\"\n            />\n            <label\n              className={cn({ [css.hasValue]: inputValue })}\n              htmlFor=\"nickname\"\n            >\n              User name\n            </label>\n\n            {!!inputValue && (\n              <a className={css.save} onClick={handleNicknameSave}>\n                Save name\n              </a>\n            )}\n          </>\n        )}\n        \n        {!isEdit && (\n          <>\n            <span className={css.text} title={username}>{username}</span>\n\n            {editable && (\n              <a\n                className={css.edit}\n                onClick={startEditNickname}\n              >\n                <Edit className={css.editicon} />\n              </a>\n            )}\n\n          </>\n        )}\n        \n        {mountHint && !collapsed && editable && (\n          <div className={cn(css.hint, { [css.showingHint]: showingHint })}>\n            <span className={css.close} onClick={closeHint}>\n              <CloseIcon />\n            </span>\n            <UserHint className={css.icon} />\n            <span className={css.content}>\n              <span className={css.title}>\n                User name\n              </span>\n              <span className={css.description}>\n                Add a Name to your account that other players will see.\n              </span>\n            </span>\n          </div>\n        )}\n      </div>\n    </div>\n  )\n}\n\nNickname.propTypes = {\n  address: PropTypes.string,\n  username: PropTypes.string,\n  editable: PropTypes.bool,\n  onNicknameChanged: PropTypes.func,\n}\n\nexport default Nickname"],"mappings":"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","ignoreList":[]}