{"version":3,"file":"ProfileBar.js","names":["_react","_interopRequireWildcard","require","_clsx","_interopRequireDefault","_propTypes","_htmlUtils","_calcUtils","_Balance","_Spinner","_AccountIcon","_PMGlobalHeaderProvider","_ProfileBarModule","obj","__esModule","_getRequireWildcardCache","e","WeakMap","r","t","_typeof","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","prototype","hasOwnProperty","call","i","set","_defineProperty","key","value","_toPropertyKey","enumerable","configurable","writable","arg","_toPrimitive","String","input","hint","prim","Symbol","toPrimitive","undefined","res","TypeError","Number","_slicedToArray","arr","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","o","minLen","_arrayLikeToArray","toString","slice","constructor","name","Array","from","test","len","length","arr2","l","iterator","f","next","done","push","isArray","useChangeERC20","number","currency","prevNumberRef","useRef","prevCurrencyRef","_useState","useState","diff","changeid","_useState2","state","setState","useEffect","prevNumber","current","prevCurrency","sub","ProfileBar","_ref","className","innerClassName","balance","account","chainName","onClick","onIconClick","_useGHProvider","useGHProvider","currencyFill","_useChangeERC","_useChangeERC2","difference","handleClick","useCallback","toLowerCase","handleIconClick","stopPropagation","handleBalanceClick","createElement","cn","css","profilebar","inner","cash","increase","isPositive","decrease","isNegative","fill","htmlCurrency","spinner","wallet","htmlAddress","action","propTypes","PropTypes","string","oneOfType","func","_default","exports","React","memo"],"sources":["../../../../src/desktop/components/ProfileBar/ProfileBar.js"],"sourcesContent":["import React, { useCallback, useEffect, useRef, useState } from 'react'\nimport cn from 'clsx'\nimport PropTypes from 'prop-types'\n\nimport { htmlAddress, htmlCurrency } from '@lib/html-utils'\nimport { isPositive, isNegative, sub } from '@lib/calc-utils'\n\nimport BalanceCurrency from '../common/Balance'\nimport Spinner from '../common/Spinner'\nimport AccountIcon from '../AccountIcon'\nimport { useGHProvider } from '../PMGlobalHeaderProvider'\n\nimport css from './ProfileBar.module.scss'\n\nconst useChangeERC20 = (number, currency) => {\n  const prevNumberRef = useRef(number)\n  const prevCurrencyRef = useRef(currency)\n  const [state, setState] = useState({ diff: 0, changeid: 0 })\n\n  useEffect(() => {\n    const prevNumber = prevNumberRef.current\n    const prevCurrency = prevCurrencyRef.current\n\n    if (prevNumber !== number && prevCurrency === currency){\n      setState({ diff: sub(number, prevNumber), changeid: state.changeid+1 })\n    }\n\n    prevNumberRef.current = number\n    prevCurrencyRef.current = currency\n  }, [number, currency])\n\n  return [state.diff, state.changeid]\n}\n\nconst ProfileBar = ({\n  className,\n  innerClassName,\n  currency,\n  balance,\n  account,\n  chainName,\n  onClick,\n  onIconClick,\n}) => {\n  const { currencyFill } = useGHProvider()\n\n  const [difference, changeid] = useChangeERC20(balance, currency)\n\n  const handleClick = useCallback(() => {\n    if (onClick) onClick(account.toLowerCase())\n  }, [onClick, account])\n\n  const handleIconClick = useCallback((e) => {\n    e.stopPropagation()\n    if (onIconClick) onIconClick(account.toLowerCase())\n  }, [onIconClick, account])\n\n  const handleBalanceClick = useCallback((e) => {\n    e.stopPropagation()\n  }, [])\n\n  return (\n    <div className={cn(css.profilebar, className)} onClick={handleClick}>\n      <div className={cn(css.inner, innerClassName)}>\n        <div\n          key={changeid}\n          className={cn(css.cash, {\n            [css.increase]: difference && isPositive(difference),\n            [css.decrease]: difference && isNegative(difference),\n          })}\n          onClick={handleBalanceClick}\n        >\n          <BalanceCurrency fill={currencyFill} currency={currency} />\n          {balance && balance !== 0 ? (\n            <span className={css.value}>{htmlCurrency(balance)}</span>\n          ) : (\n            <Spinner className={css.spinner} />\n          )}\n          <span className={css.difference}>\n            <span>+</span>\n            {htmlCurrency(difference)}\n          </span>\n        </div>\n        <div className={css.account}>\n          <div className={css.wallet}>{htmlAddress(account)}</div>\n          <div className={css.name}>{chainName}</div>\n        </div>\n        <AccountIcon\n          className={css.action}\n          account={account}\n          onClick={handleIconClick}\n        />\n      </div>\n    </div>\n  )\n}\n\nProfileBar.propTypes = {\n  className: PropTypes.string,\n  innerClassName: PropTypes.string,\n  currency: PropTypes.string,\n  balance: PropTypes.oneOfType([PropTypes.string, PropTypes.number]),\n  account: PropTypes.string,\n  chainName: PropTypes.string,\n  onClick: PropTypes.func,\n  onIconClick: PropTypes.func,\n}\n\nexport default React.memo(ProfileBar)\n"],"mappings":"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"}