{"version":3,"file":"Nickname.js","names":["_react","_interopRequireWildcard","require","_propTypes","_interopRequireDefault","_lodash","_clsx","_Edit","_UserHint","_CloseIcon","_useTransition3","_NicknameModule","obj","__esModule","_getRequireWildcardCache","nodeInterop","WeakMap","cacheBabelInterop","cacheNodeInterop","_typeof","cache","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","prototype","hasOwnProperty","call","desc","set","_defineProperty","value","_toPropertyKey","enumerable","configurable","writable","arg","_toPrimitive","String","input","hint","prim","Symbol","toPrimitive","undefined","res","TypeError","Number","_slicedToArray","arr","i","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","o","minLen","_arrayLikeToArray","n","toString","slice","constructor","name","Array","from","test","len","length","arr2","r","l","t","iterator","e","u","a","f","next","done","push","isArray","localStorageSelector","Nickname","_ref","address","username","editable","collapsed","onNicknameChanged","_useState","useState","_useState2","inputValue","setInputValue","_useState3","_useState4","editingNickname","setEditNickname","_useState5","localStorage","getItem","_useState6","showHint","setShowHint","timeout","_useTransition","useTransition","_useTransition2","mountHint","showingHint","isEdit","handleNicknameSave","useCallback","closeHint","nickname","trim","substring","changingNickname","target","setItem","createElement","className","cn","css","container","editing","Fragment","autoFocus","onChange","maxLength","id","hasValue","htmlFor","save","onClick","text","title","edit","editicon","close","icon","content","description","propTypes","PropTypes","string","bool","func","_default","exports"],"sources":["../../../../../src/desktop/components/StatisticsBar/Nickname/Nickname.js"],"sourcesContent":["import React, { useState, useCallback, useEffect } from 'react'\nimport PropTypes from 'prop-types'\nimport { trim } from 'lodash'\nimport cn from 'clsx'\n\nimport Edit from '../../SVG/Edit'\nimport UserHint from '../../SVG/UserHint'\nimport CloseIcon from '../../SVG/CloseIcon'\n\nimport { useTransition } from '../../../../hooks/useTransition'\n\nimport css from './Nickname.module.scss';\n\nconst localStorageSelector = 'pm-global-header-username-hint-closed'\n\nconst Nickname = ({\n  address,\n  username,\n  editable,\n  collapsed,\n  onNicknameChanged,\n}) => {\n  const [inputValue, setInputValue] = useState(username)\n  const [editingNickname, setEditNickname] = useState(false)\n  const [showHint, setShowHint] = useState(!username && localStorage.getItem(localStorageSelector) !== 'true')\n\n  const timeout = 100 //ms\n  const [mountHint, showingHint] = useTransition(showHint, timeout)\n\n  const isEdit = editable && (editingNickname || !username)\n\n  const handleNicknameSave = useCallback(() => {\n    if (!inputValue) return\n    if (!onNicknameChanged) return\n\n    closeHint()\n    setEditNickname(false)\n    onNicknameChanged({ address, nickname: trim(inputValue).substring(0, 35) })\n\n  }, [onNicknameChanged, inputValue, address])\n\n  const changingNickname = useCallback((e) => { setInputValue(e.target.value) }, [setInputValue])\n\n  const closeHint = useCallback(() => {\n    localStorage.setItem(localStorageSelector, true)\n    setShowHint(false)\n  }, [])\n\n  return (\n    <div className={cn(css.container, { [css.collapsed]: collapsed })}>\n      <div className={cn(css.nickname, {[css.editing]: isEdit })}>\n\n        {isEdit && (\n          <>\n            <input\n              autoFocus={!collapsed}\n              className={css.input}\n              value={inputValue}\n              onChange={changingNickname}\n              maxLength=\"35\"\n              id=\"nickname\"\n            />\n            <label\n              className={cn({ [css.hasValue]: inputValue })}\n              htmlFor=\"nickname\"\n            >\n              User name\n            </label>\n\n            {!!inputValue && (\n              <a className={css.save} onClick={handleNicknameSave}>\n                Save name\n              </a>\n            )}\n          </>\n        )}\n        \n        {!isEdit && (\n          <>\n            <span className={css.text} title={username}>{username}</span>\n\n            {editable && (\n              <a\n                className={css.edit}\n                onClick={setEditNickname}\n              >\n                <Edit className={css.editicon} />\n              </a>\n            )}\n\n          </>\n        )}\n        \n        {mountHint && !collapsed && editable && (\n          <div className={cn(css.hint, { [css.showingHint]: showingHint })}>\n            <span className={css.close} onClick={closeHint}>\n              <CloseIcon />\n            </span>\n            <UserHint className={css.icon} />\n            <span className={css.content}>\n              <span className={css.title}>\n                User name\n              </span>\n              <span className={css.description}>\n                Add a Name to your account that other players will see.\n              </span>\n            </span>\n          </div>\n        )}\n      </div>\n    </div>\n  )\n}\n\nNickname.propTypes = {\n  address: PropTypes.string,\n  username: PropTypes.string,\n  editable: PropTypes.bool,\n  onNicknameChanged: PropTypes.func,\n}\n\nexport default Nickname"],"mappings":"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"}