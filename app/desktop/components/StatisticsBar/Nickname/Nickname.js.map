{"version":3,"file":"Nickname.js","names":["_react","_interopRequireWildcard","require","_propTypes","_interopRequireDefault","_lodash","_clsx","_Edit","_UserHint","_CloseIcon","_useTransition3","_NicknameModule","obj","__esModule","_getRequireWildcardCache","e","WeakMap","r","t","_typeof","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","prototype","hasOwnProperty","call","i","set","_defineProperty","key","value","_toPropertyKey","enumerable","configurable","writable","_toPrimitive","String","Symbol","toPrimitive","TypeError","Number","_slicedToArray","arr","_arrayWithHoles","_iterableToArrayLimit","_unsupportedIterableToArray","_nonIterableRest","o","minLen","_arrayLikeToArray","toString","slice","constructor","name","Array","from","test","len","length","arr2","l","iterator","f","next","done","push","isArray","localStorageSelector","Nickname","_ref","address","username","editable","collapsed","onNicknameChanged","_useState","useState","_useState2","inputValue","setInputValue","_useState3","_useState4","editingNickname","setEditNickname","_useState5","localStorage","getItem","_useState6","showHint","setShowHint","timeout","_useTransition","useTransition","_useTransition2","mountHint","showingHint","isEdit","handleNicknameSave","useCallback","closeHint","nickname","trim","substring","changingNickname","target","setItem","createElement","className","cn","css","container","editing","Fragment","autoFocus","input","onChange","maxLength","id","hasValue","htmlFor","save","onClick","text","title","edit","editicon","hint","close","icon","content","description","propTypes","PropTypes","string","bool","func","_default","exports"],"sources":["../../../../../src/desktop/components/StatisticsBar/Nickname/Nickname.js"],"sourcesContent":["import React, { useState, useCallback, useEffect } from 'react'\nimport PropTypes from 'prop-types'\nimport { trim } from 'lodash'\nimport cn from 'clsx'\n\nimport Edit from '../../SVG/Edit'\nimport UserHint from '../../SVG/UserHint'\nimport CloseIcon from '../../SVG/CloseIcon'\n\nimport { useTransition } from '../../../../hooks/useTransition'\n\nimport css from './Nickname.module.scss';\n\nconst localStorageSelector = 'pm-global-header-username-hint-closed'\n\nconst Nickname = ({\n  address,\n  username,\n  editable,\n  collapsed,\n  onNicknameChanged,\n}) => {\n  const [inputValue, setInputValue] = useState(username)\n  const [editingNickname, setEditNickname] = useState(false)\n  const [showHint, setShowHint] = useState(!username && localStorage.getItem(localStorageSelector) !== 'true')\n\n  const timeout = 100 //ms\n  const [mountHint, showingHint] = useTransition(showHint, timeout)\n\n  const isEdit = editable && (editingNickname || !username)\n\n  const handleNicknameSave = useCallback(() => {\n    if (!inputValue) return\n    if (!onNicknameChanged) return\n\n    closeHint()\n    setEditNickname(false)\n    onNicknameChanged({ address, nickname: trim(inputValue).substring(0, 35) })\n\n  }, [onNicknameChanged, inputValue, address])\n\n  const changingNickname = useCallback((e) => { setInputValue(e.target.value) }, [setInputValue])\n\n  const closeHint = useCallback(() => {\n    localStorage.setItem(localStorageSelector, true)\n    setShowHint(false)\n  }, [])\n\n  return (\n    <div className={cn(css.container, { [css.collapsed]: collapsed })}>\n      <div className={cn(css.nickname, {[css.editing]: isEdit })}>\n\n        {isEdit && (\n          <>\n            <input\n              autoFocus={!collapsed}\n              className={css.input}\n              value={inputValue}\n              onChange={changingNickname}\n              maxLength=\"35\"\n              id=\"nickname\"\n            />\n            <label\n              className={cn({ [css.hasValue]: inputValue })}\n              htmlFor=\"nickname\"\n            >\n              User name\n            </label>\n\n            {!!inputValue && (\n              <a className={css.save} onClick={handleNicknameSave}>\n                Save name\n              </a>\n            )}\n          </>\n        )}\n        \n        {!isEdit && (\n          <>\n            <span className={css.text} title={username}>{username}</span>\n\n            {editable && (\n              <a\n                className={css.edit}\n                onClick={setEditNickname}\n              >\n                <Edit className={css.editicon} />\n              </a>\n            )}\n\n          </>\n        )}\n        \n        {mountHint && !collapsed && editable && (\n          <div className={cn(css.hint, { [css.showingHint]: showingHint })}>\n            <span className={css.close} onClick={closeHint}>\n              <CloseIcon />\n            </span>\n            <UserHint className={css.icon} />\n            <span className={css.content}>\n              <span className={css.title}>\n                User name\n              </span>\n              <span className={css.description}>\n                Add a Name to your account that other players will see.\n              </span>\n            </span>\n          </div>\n        )}\n      </div>\n    </div>\n  )\n}\n\nNickname.propTypes = {\n  address: PropTypes.string,\n  username: PropTypes.string,\n  editable: PropTypes.bool,\n  onNicknameChanged: PropTypes.func,\n}\n\nexport default Nickname"],"mappings":"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"}